<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–Ω–µ–≤–Ω–∏–∫ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π | –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –≤—ã–≥–æ—Ä–∞–Ω–∏—è</title>
    
    <!-- –§–∞–≤–∏–∫–æ–Ω–∫–∏ -->
    <link rel="icon" type="image/png" href="../assets/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="../assets/favicon/favicon.svg" />
    <link rel="shortcut icon" href="../assets/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/favicon/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="–ù–ï–ì–û–†–ò" />
    <link rel="manifest" href="../assets/favicon/site.webmanifest" />

    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <style>
        /* Reset –∏ –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --accent-color: #7f8c8d;
            --success-color: #27ae60;
            --warning-color: #e74c3c;
            --text-color: #333333;
            --dark-bg: #1a1a1a;
            --light-bg: #f8f9fa;
            --border-color: #e0e0e0;
            --white: #ffffff;
            --black: #000000;
            --shadow: 0 2px 20px rgba(0, 0, 0, 0.08);
            --transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --gray-bg: #f8f8f8;
            --hero-bg: #2c3e50;
        }

        /* –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤ */
        @font-face {
            font-family: 'NG';
            src: url('../assets/fonts/NG.woff2') format('woff2'),
                 url('../assets/fonts/NG.woff') format('woff'),
                 url('../assets/fonts/NG.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'Zag';
            src: url('../assets/fonts/Zag.woff2') format('woff2'),
                 url('../assets/fonts/Zag.woff') format('woff'),
                 url('../assets/fonts/Zag.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'Tekst';
            src: url('../assets/fonts/Tekst.woff2') format('woff2'),
                 url('../assets/fonts/Tekst.woff') format('woff'),
                 url('../assets/fonts/Tekst.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        body {
            font-family: 'Tekst', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.7;
            color: var(--text-color);
            background-color: var(--light-bg);
            font-size: 18px;
            font-weight: 400;
            max-width: 100vw;
            overflow-x: hidden;
        }

        .logo-ng {
            font-family: 'NG', sans-serif;
            font-size: 2.2rem;
            font-weight: normal;
        }

        /* –•–µ–¥–µ—Ä */
        .tilda-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--white);
            border-bottom: 1px solid var(--border-color);
            z-index: 1000;
            height: 60px;
            display: flex;
            align-items: center;
            box-shadow: var(--shadow);
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: var(--primary-color);
            margin-right: auto;
        }

        .header-nav {
            display: flex;
            gap: 2.5rem;
            align-items: center;
            margin-right: 2rem;
        }

        .nav-link {
            color: var(--text-color);
            text-decoration: none;
            font-weight: 500;
            font-size: 1.1rem;
            padding: 8px 0;
            position: relative;
            transition: var(--transition);
            white-space: nowrap;
            font-family: 'Tekst', sans-serif;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--primary-color);
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary-color);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.3rem;
            cursor: pointer;
            padding: 5px;
            z-index: 1002;
            color: var(--primary-color);
        }

        /* –ì–µ—Ä–æ–π —Å–µ–∫—Ü–∏—è */
        .diary-header-section {
            background: var(--hero-bg);
            min-height: 40vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 100px 40px;
            margin-top: 60px;
            position: relative;
            overflow: hidden;
        }

        .diary-header-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 4rem;
            width: 100%;
            position: relative;
            z-index: 2;
        }

        .diary-header-image {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transform: translateX(-50px);
            animation: slideInLeft 1s ease 0.5s forwards;
        }

        .diary-header-img {
            max-width: 100%;
            max-height: 300px;
            width: auto;
            height: auto;
            border-radius: 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .diary-header-img:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .diary-header-content {
            flex: 1;
            color: var(--white);
            text-align: left;
            opacity: 0;
            transform: translateX(50px);
            animation: slideInRight 1s ease 0.5s forwards;
        }

        .diary-header-title {
            font-size: 2.8rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            font-family: 'Zag', sans-serif;
            line-height: 1.2;
            color: var(--white);
        }

        .diary-header-text {
            font-size: 1.2rem;
            line-height: 1.7;
            font-family: 'Tekst', sans-serif;
            color: var(--white);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-element {
            opacity: 0;
            animation: fadeInUp 0.8s ease forwards;
            padding: 0;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .diary-content {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0;
        }

        .diary-article {
            background: transparent;
            padding: 1rem 0;
            line-height: 1.8;
        }

        .diary-article h1 {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 2rem;
            text-align: center;
            font-family: 'Zag', sans-serif;
            word-wrap: break-word;
            overflow-wrap: break-word;
            opacity: 0;
            animation: fadeInUp 0.8s ease 0.3s forwards;
            font-weight: 500;
        }

        .diary-article h2 {
            font-size: 1.6rem;
            color: var(--primary-color);
            margin: 3rem 0 1.5rem;
            font-family: 'Zag', sans-serif;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
            font-weight: 500;
        }

        .diary-article h3 {
            font-size: 1.3rem;
            color: var(--secondary-color);
            margin: 2rem 0 1rem;
            font-family: 'Zag', sans-serif;
            font-weight: 500;
        }

        .diary-article p {
            margin-bottom: 1.5rem;
            color: var(--text-color);
            font-family: 'Tekst', sans-serif;
            word-wrap: break-word;
            overflow-wrap: break-word;
            font-size: 1.1rem;
            line-height: 1.7;
            text-align: justify;
            opacity: 0;
            animation: fadeInUp 0.8s ease 0.5s forwards;
        }

        .diary-article ul, .diary-article ol {
            margin: 1.5rem 0;
            padding-left: 2rem;
            font-size: 1.1rem;
            line-height: 1.7;
        }

        .diary-article li {
            margin-bottom: 0.8rem;
            color: var(--text-color);
            font-size: 1.1rem;
        }

        .diary-article strong {
            color: var(--text-color);
            font-weight: 700;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ */
        .methodology-section {
            background: var(--gray-bg);
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 0;
            border-left: 4px solid var(--primary-color);
        }

        .methodology-tip {
            background: rgba(46, 204, 113, 0.1);
            border-left: 4px solid var(--success-color);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0;
        }

        .methodology-warning {
            background: rgba(231, 76, 60, 0.1);
            border-left: 4px solid var(--warning-color);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–Ω–µ–≤–Ω–∏–∫–∞ */
        .diary-structure {
            background: var(--white);
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .structure-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            font-family: 'Tekst', sans-serif;
        }

        .structure-table th {
            background: var(--primary-color);
            color: var(--white);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            border: 1px solid var(--border-color);
            font-family: 'Zag', sans-serif;
        }

        .structure-table td {
            padding: 1rem;
            border: 1px solid var(--border-color);
            vertical-align: top;
        }

        .structure-table tr:nth-child(even) {
            background: var(--gray-bg);
        }

        .column-explanation {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: var(--accent-color);
            font-style: italic;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç—Ä–µ–Ω–∞–∂–µ—Ä–∞ */
        .trainer-section {
            background: var(--white);
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .trainer-title {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 2rem;
            font-family: 'Zag', sans-serif;
            font-size: 1.8rem;
            font-weight: 500;
        }

        .trainer-step {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: var(--gray-bg);
            border-radius: 0;
            border-left: 4px solid var(--primary-color);
            opacity: 0;
            animation: fadeInUp 0.8s ease forwards;
        }

        .trainer-step h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-family: 'Zag', sans-serif;
            display: flex;
            align-items: center;
            font-weight: 500;
        }

        .step-number {
            background: var(--primary-color);
            color: var(--white);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            font-family: 'Tekst', sans-serif;
        }

        .trainer-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 0;
            font-size: 1rem;
            margin-top: 0.5rem;
            box-sizing: border-box;
            transition: var(--transition);
            font-family: 'Tekst', sans-serif;
            color: var(--text-color);
        }

        .trainer-input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 2px rgba(44, 62, 80, 0.2);
        }

        .trainer-textarea {
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
        }

        .input-example {
            font-size: 0.85rem;
            color: var(--accent-color);
            font-style: italic;
            margin-top: 0.25rem;
            margin-bottom: 1rem;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —ç–º–æ—Ü–∏–π */
        .emotion-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px;
            flex-wrap: wrap;
            padding: 15px;
            background: var(--white);
            border-radius: 0;
            border: 1px solid var(--border-color);
        }

        .emotion-name {
            flex: 1;
            min-width: 150px;
            color: var(--text-color);
        }

        .emotion-intensity {
            width: 120px;
        }

        .add-emotion-btn {
            background: var(--primary-color);
            color: var(--white);
            border: none;
            padding: 10px 20px;
            border-radius: 0;
            cursor: pointer;
            margin-top: 10px;
            font-family: 'Tekst', sans-serif;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .add-emotion-btn:hover {
            background: var(--secondary-color);
        }

        .remove-btn {
            background: var(--warning-color);
            color: var(--white);
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Tekst', sans-serif;
            transition: var(--transition);
            font-weight: bold;
            font-size: 16px;
        }

        .remove-btn:hover {
            background: #c0392b;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è */
        .autocomplete-container {
            position: relative;
            flex: 1;
        }

        .emotion-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 0;
            font-size: 1rem;
            box-sizing: border-box;
            transition: var(--transition);
            font-family: 'Tekst', sans-serif;
            color: var(--text-color);
            background-color: var(--white);
        }

        .emotion-input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 2px rgba(44, 62, 80, 0.2);
        }

        .autocomplete-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--white);
            border: 1px solid var(--border-color);
            border-top: none;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: var(--shadow);
        }

        .autocomplete-item {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
            font-family: 'Tekst', sans-serif;
            color: var(--text-color);
        }

        .autocomplete-item:hover {
            background: var(--gray-bg);
        }

        .autocomplete-item.active {
            background: var(--primary-color);
            color: var(--white);
        }

        .autocomplete-item:last-child {
            border-bottom: none;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —à–∫–∞–ª –æ—Ü–µ–Ω–∫–∏ */
        .rating-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 1rem 0;
        }

        .rating-slider {
            flex: 1;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        .rating-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
        }

        .rating-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            border: none;
        }

        .rating-value {
            font-weight: bold;
            min-width: 40px;
            text-align: center;
            font-family: 'Tekst', sans-serif;
        }

        .rating-scale {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: var(--accent-color);
            font-family: 'Tekst', sans-serif;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π */
        .consequence-item {
            background: rgba(231, 76, 60, 0.05);
            border-left: 4px solid var(--warning-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0;
        }

        .consequence-check {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(231, 76, 60, 0.2);
        }

        .check-options {
            display: flex;
            gap: 1rem;
        }

        .check-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .check-option input {
            margin: 0;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
        .trainer-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
            gap: 1rem;
        }

        .trainer-btn {
            background: var(--primary-color);
            color: var(--white);
            border: none;
            padding: 12px 24px;
            border-radius: 0;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            font-size: 1rem;
            box-shadow: var(--shadow);
            font-family: 'Tekst', sans-serif;
        }

        .trainer-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .trainer-btn:disabled {
            background: var(--accent-color);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .trainer-btn.prev {
            background: var(--accent-color);
        }

        .trainer-btn.prev:hover {
            background: #6c7a7b;
        }

        .trainer-btn.next {
            background: var(--success-color);
        }

        .trainer-btn.next:hover {
            background: #219653;
        }

        .trainer-btn.complete {
            background: var(--success-color);
            width: 100%;
        }

        .trainer-btn.complete:hover {
            background: #219653;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ */
        .result-section {
            background: var(--primary-color);
            color: #ffffff !important;
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 0;
            text-align: center;
            display: none;
            opacity: 0;
            animation: fadeInUp 0.8s ease forwards;
            border: 2px solid #ffffff;
        }

        .result-title {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            font-family: 'Zag', sans-serif;
            font-weight: 500;
            color: #ffffff !important;
        }

        .result-content {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 0;
            margin: 1.5rem 0;
            text-align: left;
            color: #ffffff !important;
            border: 1px solid #ffffff;
        }

        .result-item {
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            color: #ffffff !important;
        }

        .result-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
            color: #ffffff !important;    
        }

        .result-label {
            font-weight: bold;
            display: block;
            margin-bottom: 0.5rem;
            font-family: 'Zag', sans-serif;
            color: #ffffff !important;
            font-size: 1.1rem;
        }

        .result-value {
            font-size: 1.1rem;
            color: #ffffff !important;
            font-family: 'Tekst', sans-serif;
            line-height: 1.6;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-family: 'Tekst', sans-serif;
        }

        .comparison-table th, .comparison-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffffff;
        }

        .comparison-table th {
            background: rgba(255, 255, 255, 0.1);
            font-weight: bold;
            font-family: 'Zag', sans-serif;
        }

        .insight-positive {
            background: rgba(46, 204, 113, 0.2);
            border-left: 4px solid var(--success-color);
            padding: 1rem;
            border-radius: 0;
            margin: 1rem 0;
            color: #ffffff;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è */
        .download-section {
            background: var(--white);
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            text-align: center;
        }

        .download-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .download-btn {
            background: var(--primary-color);
            color: var(--white);
            border: none;
            padding: 12px 24px;
            border-radius: 0;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            font-size: 1rem;
            box-shadow: var(--shadow);
            font-family: 'Tekst', sans-serif;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .download-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .download-btn.template {
            background: var(--accent-color);
        }

        .download-btn.template:hover {
            background: #6c7a7b;
        }

        .download-btn.excel {
            background: var(--success-color);
        }

        .download-btn.excel:hover {
            background: #219653;
        }

        .download-btn.pdf {
            background: #e74c3c;
        }

        .download-btn.pdf:hover {
            background: #c0392b;
        }

        /* –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é */
        .mobile-menu {
            display: none;
            position: fixed;
            top: 60px;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--white);
            z-index: 1001;
            padding: 2rem;
            overflow-y: auto;
            flex-direction: column;
            gap: 2rem;
            border-top: 1px solid var(--border-color);
        }

        .mobile-menu.active {
            display: flex;
        }

        .mobile-nav-link {
            color: var(--text-color);
            text-decoration: none;
            font-weight: 500;
            font-size: 1.2rem;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border-color);
            font-family: 'Tekst', sans-serif;
            transition: var(--transition);
        }

        .mobile-nav-link:hover {
            color: var(--primary-color);
            padding-left: 1rem;
        }

        /* –§—É—Ç–µ—Ä */
        .tilda-footer {
            background: var(--dark-bg);
            color: var(--white);
            padding: 60px 0 30px;
            margin-top: 4rem;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 40px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .footer-section h3 {
            color: var(--white);
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
            font-family: 'Zag', sans-serif;
            font-weight: 500;
        }

        .footer-section p {
            color: #bdc3c7;
            line-height: 1.6;
            font-size: 1rem;
        }

        .footer-nav {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .footer-nav a {
            color: #bdc3c7;
            text-decoration: none;
            font-family: 'Tekst', sans-serif;
            transition: var(--transition);
            font-size: 1rem;
        }

        .footer-nav a:hover {
            color: var(--white);
            padding-left: 0.5rem;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #bdc3c7;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 40px 0;
            font-size: 1rem;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 1200px) {
            .diary-header-title {
                font-size: 2.3rem;
            }
            
            .diary-header-container {
                gap: 3rem;
            }
        }

        @media (max-width: 968px) {
            .header-nav {
                display: none;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .diary-header-section {
                min-height: 30vh;
                padding: 80px 30px;
            }
            
            .diary-header-container {
                flex-direction: column;
                gap: 2rem;
                text-align: center;
            }
            
            .diary-header-content {
                text-align: center;
            }
            
            .diary-header-title {
                font-size: 2rem;
            }
            
            .diary-header-text {
                font-size: 1rem;
            }
            
            .diary-article {
                padding: 3rem 0;
            }
            
            .diary-article h1 {
                font-size: 1.8rem;
            }
            
            .diary-article p {
                font-size: 1rem;
            }
            
            .trainer-buttons {
                flex-direction: column;
            }
            
            .trainer-btn {
                width: 100%;
            }
            
            .rating-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .emotion-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .emotion-intensity {
                width: 100%;
            }
            
            .download-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .download-btn {
                width: 100%;
                max-width: 300px;
            }
        }

        @media (max-width: 768px) {
            .header-container {
                padding: 0 20px;
            }
            
            .diary-header-section {
                padding: 60px 20px;
                min-height: 25vh;
            }
            
            .diary-header-title {
                font-size: 1.8rem;
            }
            
            .diary-header-text {
                font-size: 0.95rem;
            }
            
            .diary-header-img {
                max-height: 200px;
            }
            
            .diary-content {
                padding: 0 20px;
            }
            
            .diary-article {
                padding: 2rem 0;
            }
            
            .diary-article h1 {
                font-size: 1.6rem;
            }
            
            .diary-article p {
                font-size: 0.95rem;
            }
            
            .footer-content {
                padding: 0 20px;
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .footer-bottom {
                padding: 2rem 20px 0;
            }
        }

        @media (max-width: 480px) {
            .diary-header-section {
                padding: 40px 15px;
                min-height: 20vh;
            }
            
            .diary-header-title {
                font-size: 1.6rem;
            }
            
            .diary-header-text {
                font-size: 0.9rem;
            }
            
            .diary-article {
                padding: 1rem 0;
            }
            
            .diary-article p {
                font-size: 0.9rem;
            }
            
            .trainer-section {
                padding: 1rem;
            }
            
            .methodology-section {
                padding: 1rem;
            }
            
            .diary-structure {
                padding: 1rem;
            }
            
            .download-section {
                padding: 1rem;
            }
            
            .check-options {
                flex-direction: column;
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- –•–µ–¥–µ—Ä -->
    <header class="tilda-header">
        <div class="header-container">
            <a href="../index.html" class="logo">
                <span class="logo-ng">–ù–ï –ì–û–†–ò</span>
            </a>
            
            <nav class="header-nav">
                <a href="quick-help.html" class="nav-link">–ë—ã—Å—Ç—Ä–∞—è –ø–æ–º–æ—â—å</a>
                <a href="daily.html" class="nav-link">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏</a>
                <a href="materials.html" class="nav-link">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</a>
                <a href="tests.html" class="nav-link">–¢–µ—Å—Ç—ã</a>
            </nav>
            
            <button class="mobile-menu-btn">‚ò∞</button>
        </div>
    </header>

    <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é -->
    <div class="mobile-menu">
        <a href="quick-help.html" class="mobile-nav-link">–ë—ã—Å—Ç—Ä–∞—è –ø–æ–º–æ—â—å</a>
        <a href="daily.html" class="mobile-nav-link">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏</a>
        <a href="materials.html" class="mobile-nav-link">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</a>
        <a href="tests.html" class="mobile-nav-link">–¢–µ—Å—Ç—ã</a>
    </div>

    <!-- –ì–µ—Ä–æ–π —Å–µ–∫—Ü–∏—è -->
    <section class="diary-header-section">
        <div class="diary-header-container">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –∫–∞—Ä—Ç–∏–Ω–∫–∞ -->
            <div class="diary-header-image">
                <img src="../assets/images/dnev-bg.png" 
                     alt="–î–Ω–µ–≤–Ω–∏–∫ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π" 
                     class="diary-header-img">
            </div>
            
            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - —Ç–µ–∫—Å—Ç -->
            <div class="diary-header-content">
                <h1 class="diary-header-title">–î–Ω–µ–≤–Ω–∏–∫ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π</h1>
                <p class="diary-header-text">–ú–µ—Ç–æ–¥ —Ä–∞–±–æ—Ç—ã —Å –æ–∂–∏–¥–∞–Ω–∏—è–º–∏ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —Å—Ç—Ä–µ—Å—Å–∞ –∏ –ø–æ–≤—ã—à–µ–Ω–∏—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤</p>
            </div>
        </div>
    </section>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <section class="section-wide">
        <div class="diary-content">
            <article class="diary-article">
                
                <p class="fade-in-element">
                    –î–Ω–µ–≤–Ω–∏–∫ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–∂–∏–¥–∞–Ω–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç 
                    —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –Ω–∞—à–∏ –ø—Ä–æ–≥–Ω–æ–∑—ã —Å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é –∏ —É—á–∏—Ç—å—Å—è –¥–µ–ª–∞—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è.
                </p>

                <p class="fade-in-element">
                    –ß–∞—Å—Ç–æ –º—ã –ø–µ—Ä–µ–æ—Ü–µ–Ω–∏–≤–∞–µ–º –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è —Å–æ–±—ã—Ç–∏–π –∏ –Ω–µ–¥–æ–æ—Ü–µ–Ω–∏–≤–∞–µ–º —Å–≤–æ—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å 
                    —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏. –≠—Ç–æ—Ç –¥–Ω–µ–≤–Ω–∏–∫ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Ä–∞–∑–≤–∏—Ç—å –±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –≤–∑–≥–ª—è–¥ –Ω–∞ —Å–∏—Ç—É–∞—Ü–∏–∏.
                </p>

                <!-- –ë–ª–æ–∫ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ -->
                <div class="methodology-section fade-in-element">
                    <h2>–ß—Ç–æ —Ç–∞–∫–æ–µ –¥–Ω–µ–≤–Ω–∏–∫ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π?</h2>
                    
                    <p><strong>–î–Ω–µ–≤–Ω–∏–∫ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π</strong> ‚Äî —ç—Ç–æ –º–µ—Ç–æ–¥ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ-–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–π —Ç–µ—Ä–∞–ø–∏–∏, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –Ω–∞ —Ä–∞–±–æ—Ç—É —Å –æ–∂–∏–¥–∞–Ω–∏—è–º–∏ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏. –û–Ω –ø–æ–º–æ–≥–∞–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –Ω–∞—à–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ.</p>
                    
                    <h3>–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ—Ç–æ–¥?</h3>
                    <p>–ú–µ—Ç–æ–¥ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–∏–ø–æ—Ç–µ–∑: –º—ã —Ñ–æ—Ä–º—É–ª–∏—Ä—É–µ–º –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å–∏—Ç—É–∞—Ü–∏–∏, –∞ –∑–∞—Ç–µ–º —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º –∏—Ö —Å —Ç–µ–º, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç:</p>
                    
                    <ul>
                        <li>–í—ã—è–≤–∏—Ç—å —Å–ª—É—á–∞–∏ –ø–µ—Ä–µ–æ—Ü–µ–Ω–∫–∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π</li>
                        <li>–†–∞–∑–≤–∏—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ</li>
                        <li>–°–Ω–∏–∑–∏—Ç—å —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å, —Å–≤—è–∑–∞–Ω–Ω—É—é —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º —Ö—É–¥—à–µ–≥–æ</li>
                        <li>–ü–æ–≤—ã—Å–∏—Ç—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–≤–æ–µ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏</li>
                    </ul>
                    
                    <div class="methodology-tip">
                        <p>üí° <strong>–í–∞–∂–Ω–æ:</strong> –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤–µ–¥–µ–Ω–∏–µ –¥–Ω–µ–≤–Ω–∏–∫–∞ –ø–æ–º–æ–≥–∞–µ—Ç –ø–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –º—ã—à–ª–µ–Ω–∏—è –∏ —Å–Ω–∏–∑–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞ —É–∂–µ —á–µ—Ä–µ–∑ 2-3 –Ω–µ–¥–µ–ª–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏.</p>
                    </div>
                </div>

                <!-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–Ω–µ–≤–Ω–∏–∫–∞ -->
                <h2 class="fade-in-element">–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–Ω–µ–≤–Ω–∏–∫–∞ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π</h2>
                
                <p class="fade-in-element">
                    –î–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –æ–∂–∏–¥–∞–Ω–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –ó–∞–ø–æ–ª–Ω—è–π—Ç–µ –µ–µ –¥–ª—è —Å–∏—Ç—É–∞—Ü–∏–π, 
                    –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∑—ã–≤–∞—é—Ç —É –≤–∞—Å —Å–∏–ª—å–Ω—ã–µ —ç–º–æ—Ü–∏–∏ –∏–ª–∏ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ.
                </p>

                <div class="diary-structure fade-in-element">
                    <h3>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–Ω–µ–≤–Ω–∏–∫–∞ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π</h3>
                    
                    <table class="structure-table">
                        <thead>
                            <tr>
                                <th>–ö–æ–ª–æ–Ω–∫–∞</th>
                                <th>–ß—Ç–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å</th>
                                <th>–ü—Ä–∏–º–µ—Ä</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>–î–∞—Ç–∞/–°–∏—Ç—É–∞—Ü–∏—è</strong></td>
                                <td>
                                    –û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ
                                    <div class="column-explanation">–ß—Ç–æ –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç? –ì–¥–µ? –ö–æ–≥–¥–∞? –° –∫–µ–º?</div>
                                </td>
                                <td>–†–∞–∑–≥–æ–≤–æ—Ä —Å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–º –æ –¥–æ–ø—É—â–µ–Ω–Ω–æ–π –æ—à–∏–±–∫–µ –≤ –æ—Ç—á–µ—Ç–µ</td>
                            </tr>
                            <tr>
                                <td><strong>–û–∂–∏–¥–∞–Ω–∏—è</strong></td>
                                <td>
                                    –ß—Ç–æ, –ø–æ –≤–∞—à–µ–º—É –º–Ω–µ–Ω–∏—é, –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –≤ —ç—Ç–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏?
                                    <div class="column-explanation">–ö–∞–∫–∏–µ –º—ã—Å–ª–∏, —á—É–≤—Å—Ç–≤–∞, —Ä–µ–∞–∫—Ü–∏–∏ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç–µ?</div>
                                </td>
                                <td>–û–∂–∏–¥–∞—é –∫—Ä–∏—Ç–∏–∫–∏, –ø–æ—á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –±–µ—Å–ø–æ–º–æ—â–Ω—ã–º, –Ω–µ —Å–º–æ–≥—É –æ—Ç–≤–µ—Ç–∏—Ç—å, –º–µ–Ω—è —É–≤–æ–ª—è—Ç</td>
                            </tr>
                            <tr>
                                <td><strong>–†–µ–∞–ª—å–Ω–æ—Å—Ç—å</strong></td>
                                <td>
                                    –ö–∞–∫ —Å–∏—Ç—É–∞—Ü–∏—è –ø—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ
                                    <div class="column-explanation">–ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å –≤ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏?</div>
                                </td>
                                <td>–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å —É–∫–∞–∑–∞–ª –Ω–∞ –æ—à–∏–±–∫—É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ, —è —Å–º–æ–≥ –æ–±—ä—è—Å–Ω–∏—Ç—å –ø—Ä–∏—á–∏–Ω—ã</td>
                            </tr>
                            <tr>
                                <td><strong>–í—ã–≤–æ–¥</strong></td>
                                <td>
                                    –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏–π –∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏
                                    <div class="column-explanation">–ß—Ç–æ —Å–æ–≤–ø–∞–ª–æ, –∞ —á—Ç–æ –æ–∫–∞–∑–∞–ª–æ—Å—å –∏–Ω–∞—á–µ? –ö–∞–∫–∏–µ —É—Ä–æ–∫–∏?</div>
                                </td>
                                <td>–°–∏—Ç—É–∞—Ü–∏—è –±—ã–ª–∞ –º–µ–Ω–µ–µ —Å—Ç—Ä–µ—Å—Å–æ–≤–æ–π, —á–µ–º –æ–∂–∏–¥–∞–ª. –Ø —Å–ø—Ä–∞–≤–ª—è—é—Å—å –ª—É—á—à–µ, —á–µ–º –¥—É–º–∞–ª</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="methodology-tip" style="margin-top: 1.5rem;">
                        <p>üí° <strong>–°–æ–≤–µ—Ç:</strong> –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–Ω–µ–≤–Ω–∏–∫–∞ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –±—ã—Å—Ç—Ä–µ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –∏—Å–∫–∞–∂–µ–Ω–∏—è –≤ –æ–∂–∏–¥–∞–Ω–∏—è—Ö –∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–∏—Ç—É–∞—Ü–∏–∏ –±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ.</p>
                    </div>
                </div>

                <!-- –°–µ–∫—Ü–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–∞ -->
                <div class="download-section fade-in-element">
                    <h2>–°–∫–∞—á–∞—Ç—å —à–∞–±–ª–æ–Ω –¥–Ω–µ–≤–Ω–∏–∫–∞ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π</h2>
                    <p>–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã —Å –¥–Ω–µ–≤–Ω–∏–∫–æ–º —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π –≤—ã –º–æ–∂–µ—Ç–µ —Å–∫–∞—á–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π —à–∞–±–ª–æ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ Word.</p>
                    <div class="download-buttons">
                        <button class="download-btn template" onclick="downloadTemplate()">
                            üìÑ –°–∫–∞—á–∞—Ç—å —à–∞–±–ª–æ–Ω (.docx)
                        </button>
                    </div>
                </div>

                <h2 class="fade-in-element">–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä –¥–Ω–µ–≤–Ω–∏–∫–∞ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π</h2>
                
                <p class="fade-in-element">
                    –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ—é —Å–∏—Ç—É–∞—Ü–∏—é —Å –æ–∂–∏–¥–∞–Ω–∏—è–º–∏ —Å –ø–æ–º–æ—â—å—é –Ω–∞—à–µ–≥–æ —Ç—Ä–µ–Ω–∞–∂–µ—Ä–∞. 
                    –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º—ã —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ–∂–∏–¥–∞–Ω–∏–π –∏ –Ω–∞—É—á–∏—Ç—å—Å—è –¥–µ–ª–∞—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã.
                </p>
            </article>
        </div>
    </section>

    <!-- –¢—Ä–µ–Ω–∞–∂–µ—Ä –¥–Ω–µ–≤–Ω–∏–∫–∞ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π -->
    <section class="section-wide">
        <div class="diary-content">
            <article class="diary-article">
                <div class="trainer-section fade-in-element">
                    <h2 class="trainer-title">–¢—Ä–µ–Ω–∞–∂–µ—Ä –¥–Ω–µ–≤–Ω–∏–∫–∞ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π</h2>
                    
                    <!-- –®–∞–≥ 1: –°–∏—Ç—É–∞—Ü–∏—è -->
                    <div id="step1" class="trainer-step">
                        <h3><span class="step-number">1</span> –°–∏—Ç—É–∞—Ü–∏—è</h3>
                        <p>–û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç —É –≤–∞—Å –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ –∏–ª–∏ —Å–∏–ª—å–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è. –ë—É–¥—å—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã.</p>
                        <textarea class="trainer-input trainer-textarea" id="situation" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–π —Ä–∞–∑–≥–æ–≤–æ—Ä —Å –≥–ª–∞–≤–Ω—ã–º –≤—Ä–∞—á–æ–º –æ –¥–æ–ø—É—â–µ–Ω–Ω–æ–π –æ—à–∏–±–∫–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Å—Ç–∏ —Å–ª–æ–∂–Ω—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É –≤–ø–µ—Ä–≤—ã–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –æ–±—â–µ–Ω–∏–µ —Å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–º –ø–∞—Ü–∏–µ–Ω—Ç–∞..."></textarea>
                        <div class="input-example">–ü—Ä–∏–º–µ—Ä: "–ó–∞–≤—Ç—Ä–∞ –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —Å–ª–æ–∂–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä —Å –≥–ª–∞–≤–Ω—ã–º –≤—Ä–∞—á–æ–º –æ –æ—à–∏–±–∫–µ –≤ –æ—Ç—á–µ—Ç–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–≤–∞—Ä—Ç–∞–ª"</div>
                    </div>
                    
                    <!-- –®–∞–≥ 2: –û–∂–∏–¥–∞–Ω–∏—è -->
                    <div id="step2" class="trainer-step" style="display: none;">
                        <h3><span class="step-number">2</span> –û–∂–∏–¥–∞–Ω–∏—è</h3>
                        
                        <p><strong>–ß—Ç–æ –ø–æ –≤–∞—à–µ–º—É –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç?</strong> –û–ø–∏—à–∏—Ç–µ –≤–∞—à–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç —Å–∏—Ç—É–∞—Ü–∏–∏.</p>
                        <textarea class="trainer-input trainer-textarea" id="expectations" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û–∂–∏–¥–∞—é, —á—Ç–æ –≥–ª–∞–≤–Ω—ã–π –≤—Ä–∞—á –±—É–¥–µ—Ç –∫—Ä–∏—Ç–∏–∫–æ–≤–∞—Ç—å –º–µ–Ω—è, –ø–æ—á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –±–µ—Å–ø–æ–º–æ—â–Ω—ã–º, –Ω–µ —Å–º–æ–≥—É –≥—Ä–∞–º–æ—Ç–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, —Å–∏—Ç—É–∞—Ü–∏—è –≤—ã–π–¥–µ—Ç –∏–∑-–ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª—è..."></textarea>
                        <div class="input-example">–ü—Ä–∏–º–µ—Ä: "–î—É–º–∞—é, —á—Ç–æ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –±—É–¥–µ—Ç –æ—á–µ–Ω—å –∑–æ–ª, –Ω–∞—á–Ω–µ—Ç –ø–æ–≤—ã—à–∞—Ç—å –≥–æ–ª–æ—Å, –∏ —è –Ω–µ —Å–º–æ–≥—É –Ω–∏—á–µ–≥–æ –æ—Ç–≤–µ—Ç–∏—Ç—å"</div>
                        
                        <p><strong>–ö–∞–∫–∏–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –≤—ã –æ–∂–∏–¥–∞–µ—Ç–µ?</strong> –û—Ü–µ–Ω–∏—Ç–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ –ø–æ —à–∫–∞–ª–µ –æ—Ç 0 –¥–æ 100%.</p>
                        
                        <div id="expected-consequences-container">
                            <div class="consequence-item">
                                <textarea class="trainer-input trainer-textarea consequence-text" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–æ–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ..."></textarea>
                                <div class="input-example">–ü—Ä–∏–º–µ—Ä: "–ú–µ–Ω—è —É–≤–æ–ª—è—Ç —Å —Ä–∞–±–æ—Ç—ã"</div>
                                <div class="rating-container">
                                    <span>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:</span>
                                    <input type="range" class="rating-slider consequence-probability" min="0" max="100" value="50" step="5">
                                    <span class="rating-value consequence-probability-value">50%</span>
                                </div>
                                <div class="rating-scale">
                                    <span>0% - –ù–µ —Å–ª—É—á–∏—Ç—Å—è</span>
                                    <span>50% - –í–æ–∑–º–æ–∂–Ω–æ</span>
                                    <span>100% - –¢–æ—á–Ω–æ —Å–ª—É—á–∏—Ç—Å—è</span>
                                </div>
                                <button class="remove-btn" onclick="removeConsequence(this)">√ó –£–¥–∞–ª–∏—Ç—å</button>
                            </div>
                        </div>
                        
                        <button class="add-emotion-btn" onclick="addConsequence()">+ –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ</button>
                        
                        <p><strong>–ö–∞–∫–∏–µ —ç–º–æ—Ü–∏–∏ –≤—ã –æ–∂–∏–¥–∞–µ—Ç–µ?</strong> –û—Ü–µ–Ω–∏—Ç–µ –∏—Ö –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –ø–æ —à–∫–∞–ª–µ –æ—Ç 0 –¥–æ 100%.</p>
                        
                        <div id="expected-emotions-container">
                            <div class="emotion-item">
                                <div class="autocomplete-container">
                                    <input type="text" class="emotion-input emotion-name" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —ç–º–æ—Ü–∏–∏..." autocomplete="off">
                                    <div class="autocomplete-list"></div>
                                </div>
                                <input type="number" class="trainer-input emotion-intensity" placeholder="0-100%" min="0" max="100" step="10">
                                <button class="remove-btn" onclick="removeEmotion(this)">√ó</button>
                            </div>
                        </div>
                        
                        <button class="add-emotion-btn" onclick="addEmotion()">+ –î–æ–±–∞–≤–∏—Ç—å —ç–º–æ—Ü–∏—é</button>
                    </div>
                    
                    <!-- –®–∞–≥ 3: –†–µ–∞–ª—å–Ω–æ—Å—Ç—å -->
                    <div id="step3" class="trainer-step" style="display: none;">
                        <h3><span class="step-number">3</span> –†–µ–∞–ª—å–Ω–æ—Å—Ç—å</h3>
                        
                        <p><strong>3.1 –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ?</strong> –û–ø–∏—à–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π —Ö–æ–¥ —Å–æ–±—ã—Ç–∏–π.</p>
                        <textarea class="trainer-input trainer-textarea" id="reality" placeholder="–û–ø–∏—à–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π —Ö–æ–¥ —Å–æ–±—ã—Ç–∏–π, –≤–∞—à–∏ —Ä–µ–∞–∫—Ü–∏–∏ –∏ —ç–º–æ—Ü–∏–∏..."></textarea>
                        <div class="input-example">–ü—Ä–∏–º–µ—Ä: "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –±—ã–ª —Å–µ—Ä—å–µ–∑–µ–Ω, –Ω–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–µ–Ω. –í—ã—Å–ª—É—à–∞–ª –º–æ–∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–ª–æ–∂–∏–ª –ø–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∏"</div>
                        
                        <p><strong>3.2 –û–∂–∏–¥–∞–µ–º—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:</strong> –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å–ª—É—á–∏–ª–∏—Å—å –ª–∏ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è.</p>
                        
                        <div id="actual-consequences-container">
                            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω JavaScript -->
                        </div>
                        
                        <p><strong>3.3 –û–∂–∏–¥–∞–µ–º—ã–µ —ç–º–æ—Ü–∏–∏:</strong> –£–∫–∞–∂–∏—Ç–µ –≤—ã—Ä–∞–∂–µ–Ω–Ω–æ—Å—Ç—å —ç—Ç–∏—Ö —ç–º–æ—Ü–∏–π –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ.</p>
                        
                        <div id="actual-emotions-container">
                            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —ç–º–æ—Ü–∏–π –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω JavaScript -->
                        </div>
                        
                        <p><strong>3.4 –ö–∞–∫–∏–µ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –±—ã–ª–∏?</strong> –û–ø–∏—à–∏—Ç–µ, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ:</p>
                        <textarea class="trainer-input trainer-textarea" id="actual-consequences-text" placeholder="–û–ø–∏—à–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è —Å–∏—Ç—É–∞—Ü–∏–∏..."></textarea>
                        <div class="input-example">–ü—Ä–∏–º–µ—Ä: "–ü–æ–ª—É—á–∏–ª –∑–∞–º–µ—á–∞–Ω–∏–µ –≤ –ª–∏—á–Ω–æ–π –±–µ—Å–µ–¥–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å –æ—Ç—á–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏"</div>
                        
                        <p><strong>3.5 –ö–∞–∫–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–æ–≤–ª–∞–¥–∞–Ω–∏—è –ø–æ–º–æ–≥–ª–∏ –≤–∞–º?</strong> –ß—Ç–æ –æ–∫–∞–∑–∞–ª–æ—Å—å –ø–æ–ª–µ–∑–Ω—ã–º?</p>
                        <textarea class="trainer-input trainer-textarea" id="coping-strategies" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ì–ª—É–±–æ–∫–æ–µ –¥—ã—Ö–∞–Ω–∏–µ –ø–æ–º–æ–≥–ª–æ —É—Å–ø–æ–∫–æ–∏—Ç—å—Å—è, –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–∑–º–æ–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–ª–ª–µ–≥–∏..."></textarea>
                        <div class="input-example">–ü—Ä–∏–º–µ—Ä: "–ó–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –¥–µ–ª–∞–ª –ø–∞—É–∑—ã –ø–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º, —Å–æ—Ö—Ä–∞–Ω—è–ª —Å–ø–æ–∫–æ–π–Ω—ã–π —Ç–æ–Ω"</div>
                    </div>
                    
                    <!-- –®–∞–≥ 4: –ê–Ω–∞–ª–∏–∑ –∏ –≤—ã–≤–æ–¥—ã -->
                    <div id="step4" class="trainer-step" style="display: none;">
                        <h3><span class="step-number">4</span> –ê–Ω–∞–ª–∏–∑ –∏ –≤—ã–≤–æ–¥—ã</h3>
                        <p><strong>–°—Ä–∞–≤–Ω–∏—Ç–µ –≤–∞—à–∏ –æ–∂–∏–¥–∞–Ω–∏—è —Å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é.</strong> –ß—Ç–æ —Å–æ–≤–ø–∞–ª–æ, –∞ —á—Ç–æ –æ–∫–∞–∑–∞–ª–æ—Å—å –∏–Ω–∞—á–µ?</p>
                        <textarea class="trainer-input trainer-textarea" id="comparison" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û–∂–∏–¥–∞–ª –∂–µ—Å—Ç–∫–æ–π –∫—Ä–∏—Ç–∏–∫–∏, –Ω–æ –ø–æ–ª—É—á–∏–ª –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è; –±–æ—è–ª—Å—è –Ω–µ –Ω–∞–π—Ç–∏ —Å–ª–æ–≤, –Ω–æ —Å–º–æ–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å; —Ç—Ä–µ–≤–æ–≥–∞ –±—ã–ª–∞ –º–µ–Ω—å—à–µ, —á–µ–º –æ–∂–∏–¥–∞–ª..."></textarea>
                        <div class="input-example">–ü—Ä–∏–º–µ—Ä: "–°–∏—Ç—É–∞—Ü–∏—è –æ–∫–∞–∑–∞–ª–∞—Å—å –≥–æ—Ä–∞–∑–¥–æ –º–µ–Ω–µ–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω–æ–π, —á–µ–º —è –æ–∂–∏–¥–∞–ª. –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –±—ã–ª –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω –≤ —Ä–µ—à–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã, –∞ –Ω–µ –≤ –ø–æ–∏—Å–∫–µ –≤–∏–Ω–æ–≤–∞—Ç—ã—Ö"</div>
                        
                        <p><strong>–ß—Ç–æ –≤—ã —É–∑–Ω–∞–ª–∏ –∏–∑ —ç—Ç–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏?</strong> –ö–∞–∫–∏–µ –≤—ã–≤–æ–¥—ã –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?</p>
                        <textarea class="trainer-input trainer-textarea" id="insights" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°–∏—Ç—É–∞—Ü–∏—è –±—ã–ª–∞ –Ω–µ —Ç–∞–∫–æ–π —Å—Ç—Ä–∞—à–Ω–æ–π, –∫–∞–∫ –∫–∞–∑–∞–ª–æ—Å—å; —è —Å–ø—Ä–∞–≤–ª—è—é—Å—å –ª—É—á—à–µ, —á–µ–º –æ–∂–∏–¥–∞–ª; –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–æ–º–æ–≥–ª–∞ —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è —É–≤–µ—Ä–µ–Ω–Ω–µ–µ..."></textarea>
                        <div class="input-example">–ü—Ä–∏–º–µ—Ä: "–Ø —Å–∫–ª–æ–Ω–µ–Ω –ø—Ä–µ—É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è. –í –±—É–¥—É—â–µ–º –±—É–¥—É –±–æ–ª—å—à–µ –¥–æ–≤–µ—Ä—è—Ç—å —Å–≤–æ–µ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏"</div>
                        
                        <p><strong>–ö–∞–∫ —ç—Ç–æ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ –≤–∞—à–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –ø–æ–¥–æ–±–Ω—ã–º —Å–∏—Ç—É–∞—Ü–∏—è–º –≤ –±—É–¥—É—â–µ–º?</strong></p>
                        <textarea class="trainer-input trainer-textarea" id="future-impact" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ë—É–¥—É –º–µ–Ω—å—à–µ —Ç—Ä–µ–≤–æ–∂–∏—Ç—å—Å—è –≤ –ø–æ–¥–æ–±–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö; –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ –º–æ–≥—É —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –ª—É—á—à–µ, —á–µ–º –æ–∂–∏–¥–∞—é; –±—É–¥—É –±–æ–ª—å—à–µ –¥–æ–≤–µ—Ä—è—Ç—å —Å–≤–æ–µ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ..."></textarea>
                        <div class="input-example">–ü—Ä–∏–º–µ—Ä: "–í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –±—É–¥—É –º–µ–Ω—å—à–µ –Ω–µ—Ä–≤–Ω–∏—á–∞—Ç—å –ø–µ—Ä–µ–¥ —Å–ª–æ–∂–Ω—ã–º–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞–º–∏ –∏ –±–æ–ª—å—à–µ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á—É—Å—å –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ —Å–æ–¥–µ—Ä–∂–∞—Ç–µ–ª—å–Ω–æ–π —á–∞—Å—Ç–∏"</div>
                    </div>
                    
                    <div class="trainer-buttons">
                        <button class="trainer-btn prev" id="prevBtn" onclick="prevStep()" style="display: none;">‚Üê –ù–∞–∑–∞–¥</button>
                        <button class="trainer-btn next" id="nextBtn" onclick="nextStep()">–î–∞–ª–µ–µ ‚Üí</button>
                    </div>
                    
                    <div id="completeSection" style="display: none; text-align: center; margin-top: 2rem;">
                        <button class="trainer-btn complete" onclick="showResult()">–ó–∞–≤–µ—Ä—à–∏—Ç—å –∞–Ω–∞–ª–∏–∑</button>
                    </div>
                </div>

                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞ -->
                <div class="result-section" id="resultSection">
                    <h2 class="result-title">‚úÖ –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω!</h2>
                    <p style="color: #ffffff !important;">–í–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∞—à–µ–π —Ä–∞–±–æ—Ç—ã —Å –æ–∂–∏–¥–∞–Ω–∏—è–º–∏:</p>
                    
                    <div class="result-content">
                        <div class="result-item">
                            <span class="result-label">üìù –°–∏—Ç—É–∞—Ü–∏—è:</span>
                            <span class="result-value" id="resultSituation"></span>
                        </div>
                        
                        <div class="result-item">
                            <span class="result-label">üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏–π –∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏:</span>
                            <table class="comparison-table">
                                <thead>
                                    <tr>
                                        <th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th>
                                        <th>–û–∂–∏–¥–∞–Ω–∏–µ</th>
                                        <th>–†–µ–∞–ª—å–Ω–æ—Å—Ç—å</th>
                                        <th>–†–∞–∑–Ω–∏—Ü–∞</th>
                                    </tr>
                                </thead>
                                <tbody id="comparisonTableBody">
                                    <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="result-item">
                            <span class="result-label">üîÑ –ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–ª–∏—á–∏—è:</span>
                            <span class="result-value" id="resultComparison"></span>
                        </div>
                        
                        <div class="result-item">
                            <span class="result-label">üõ°Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:</span>
                            <span class="result-value" id="resultStrategies"></span>
                        </div>
                        
                        <div class="result-item">
                            <span class="result-label">üí° –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Å–∞–π—Ç—ã:</span>
                            <span class="result-value" id="resultInsights"></span>
                        </div>
                        
                        <div class="result-item">
                            <span class="result-label">üöÄ –í–ª–∏—è–Ω–∏–µ –Ω–∞ –±—É–¥—É—â–µ–µ:</span>
                            <span class="result-value" id="resultFutureImpact"></span>
                        </div>
                        
                        <div class="result-item">
                            <span class="result-label">üìà –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</span>
                            <div id="recommendations" class="insight-positive"></div>
                        </div>
                    </div>
                    
                    <div class="download-buttons" style="margin-top: 2rem;">
                        <button class="download-btn excel" onclick="downloadExcel()">
                            üìä –°–∫–∞—á–∞—Ç—å –≤ Excel
                        </button>
                        <button class="download-btn pdf" onclick="downloadPDF()">
                            üìÑ –°–∫–∞—á–∞—Ç—å –≤ PDF
                        </button>
                    </div>
                    
                    <button class="trainer-btn" onclick="resetTrainer()" style="margin-top: 1rem; background: #ffffff; color: var(--primary-color);">–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é —Å–∏—Ç—É–∞—Ü–∏—é</button>
                </div>
            </article>
        </div>
    </section>

    <!-- –ó–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–∞—è —Å–µ–∫—Ü–∏—è -->
    <section class="section-wide">
        <div class="diary-content">
            <article class="diary-article">
                <h2 class="fade-in-element">–ü–æ—á–µ–º—É –¥–Ω–µ–≤–Ω–∏–∫ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω?</h2>
                
                <p class="fade-in-element">
                    –î–Ω–µ–≤–Ω–∏–∫ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ-–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–π —Ç–µ—Ä–∞–ø–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –∏–º–µ–µ—Ç –ø—Ä–æ—á–Ω—É—é –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω—É—é –±–∞–∑—É 
                    –≤ —Ä–∞–±–æ—Ç–µ —Å —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å—é, –¥–µ–ø—Ä–µ—Å—Å–∏–µ–π –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º –≤—ã–≥–æ—Ä–∞–Ω–∏–µ–º.
                </p>

                <div class="methodology-tip fade-in-element">
                    <p> <strong>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ–≤–µ—Ç:</strong> –°—Ç–∞—Ä–∞–π—Ç–µ—Å—å –∑–∞–ø–æ–ª–Ω—è—Ç—å –¥–Ω–µ–≤–Ω–∏–∫ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π –¥–ª—è —Å–∏—Ç—É–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∑—ã–≤–∞—é—Ç —É –≤–∞—Å —Å–∏–ª—å–Ω—ã–µ —ç–º–æ—Ü–∏–∏. 
                    –†–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Ä–∞–∑–≤–∏—Ç—å –±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –≤–∑–≥–ª—è–¥ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –∏ –ø–æ–≤—ã—Å–∏—Ç—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ–±–µ.</p>
                </div>
            </article>
        </div>
    </section>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="tilda-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>–û –ø—Ä–æ–µ–∫—Ç–µ</h3>
                <p>"–ù–ï –ì–û–†–ò" ‚Äî —ç—Ç–æ —Ä–µ—Å—É—Ä—Å –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –≤—ã–≥–æ—Ä–∞–Ω–∏—è –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ—Ñ–µ—Å—Å–∏–π.</p>
            </div>
            
            <div class="footer-section">
                <h3>–ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏</h3>
                <nav class="footer-nav">
                    <a href="../index.html">–ì–ª–∞–≤–Ω–∞—è</a>
                    <a href="quick-help.html">–ë—ã—Å—Ç—Ä–∞—è –ø–æ–º–æ—â—å</a>
                    <a href="daily.html">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏</a>
                    <a href="materials.html">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</a>
                    <a href="tests.html">–¢–µ—Å—Ç—ã</a>
                </nav>
            </div>
            
            <div class="footer-section">
                <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                <p>–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å:</p>
                <p>email@example.com</p>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2024 "–ù–ï –ì–û–†–ò". –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
    </footer>

    <script>
        // ===== –°–ò–°–¢–ï–ú–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò =====
        
        function sanitizeInput(input) {
            if (typeof input !== 'string') return '';
            return input
                .replace(/[<>"'&`]/g, '')
                .replace(/[;|&$(){}\[\]\\]/g, '')
                .replace(/\.\.\//g, '')
                .replace(/\b(union|select|drop|insert|update|delete|script|javascript|on\w+)\b/gi, '')
                .substring(0, 1000);
        }

        function safeTextInput(text) {
            if (typeof text !== 'string') return '';
            return text.replace(/[^a-zA-Z–∞-—è–ê-–Ø0-9\s\-_\.@,?!:()]/g, '')
                      .substring(0, 1000);
        }

        function safeNumberInput(value, min = 0, max = 100) {
            const num = parseInt(value);
            if (isNaN(num)) return min;
            return Math.min(Math.max(num, min), max);
        }

        // ===== –î–ê–ù–ù–´–ï –ò –ü–ï–†–ï–ú–ï–ù–ù–´–ï =====
        
        const emotionsList = [
            "–¢—Ä–µ–≤–æ–≥–∞", "–°—Ç—Ä–∞—Ö", "–ü–∞–Ω–∏–∫–∞", "–ë–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ", "–ù–µ—Ä–≤–æ–∑–Ω–æ—Å—Ç—å",
            "–ì–Ω–µ–≤", "–†–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ", "–ó–ª–æ—Å—Ç—å", "–Ø—Ä–æ—Å—Ç—å", "–í–æ–∑–º—É—â–µ–Ω–∏–µ",
            "–ì—Ä—É—Å—Ç—å", "–ü–µ—á–∞–ª—å", "–û—Ç—á–∞—è–Ω–∏–µ", "–ë–µ–∑—ã—Å—Ö–æ–¥–Ω–æ—Å—Ç—å", "–¢–æ—Å–∫–∞",
            "–°—Ç—ã–¥", "–í–∏–Ω–∞", "–°–º—É—â–µ–Ω–∏–µ", "–£–Ω–∏–∂–µ–Ω–∏–µ", "–°–∫–æ—Ä–±—å",
            "–†–∞–¥–æ—Å—Ç—å", "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏–µ", "–û–±–ª–µ–≥—á–µ–Ω–∏–µ", "–ì–æ—Ä–¥–æ—Å—Ç—å", "–ù–∞–¥–µ–∂–¥–∞",
            "–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ", "–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å", "–†–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω–æ—Å—Ç—å", "–£–º–∏—Ä–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ"
        ];

        let currentStep = 1;
        const totalSteps = 4;
        
        let expectedEmotions = [];
        let actualEmotions = [];
        let expectedConsequences = [];
        let actualConsequences = [];

        // ===== –§–£–ù–ö–¶–ò–ò –ê–í–¢–û–î–û–ü–û–õ–ù–ï–ù–ò–Ø =====
        
        function setupAutocomplete(inputElement) {
            const list = inputElement.parentElement.querySelector('.autocomplete-list');
            
            inputElement.addEventListener('input', function() {
                const value = safeTextInput(this.value).toLowerCase();
                list.innerHTML = '';
                
                if (value.length > 0) {
                    const filteredEmotions = emotionsList.filter(emotion => 
                        emotion.toLowerCase().includes(value)
                    );
                    
                    if (filteredEmotions.length > 0) {
                        filteredEmotions.forEach(emotion => {
                            const item = document.createElement('div');
                            item.className = 'autocomplete-item';
                            item.textContent = emotion;
                            item.addEventListener('click', function() {
                                inputElement.value = emotion;
                                list.style.display = 'none';
                            });
                            list.appendChild(item);
                        });
                        list.style.display = 'block';
                    } else {
                        list.style.display = 'none';
                    }
                } else {
                    list.style.display = 'none';
                }
            });
            
            document.addEventListener('click', function(e) {
                if (!inputElement.parentElement.contains(e.target)) {
                    list.style.display = 'none';
                }
            });
            
            inputElement.addEventListener('keydown', function(e) {
                const items = list.querySelectorAll('.autocomplete-item');
                let activeItem = list.querySelector('.autocomplete-item.active');
                
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    if (!activeItem) {
                        items[0]?.classList.add('active');
                    } else {
                        activeItem.classList.remove('active');
                        const next = activeItem.nextElementSibling;
                        if (next) next.classList.add('active');
                    }
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    if (activeItem) {
                        activeItem.classList.remove('active');
                        const prev = activeItem.previousElementSibling;
                        if (prev) prev.classList.add('active');
                    }
                } else if (e.key === 'Enter' && activeItem) {
                    e.preventDefault();
                    inputElement.value = activeItem.textContent;
                    list.style.display = 'none';
                }
            });
        }

        // ===== –§–£–ù–ö–¶–ò–ò –†–ê–ë–û–¢–´ –° –≠–ú–û–¶–ò–Ø–ú–ò =====
        
        function addEmotion() {
            const container = document.getElementById('expected-emotions-container');
            const emotionItem = document.createElement('div');
            emotionItem.className = 'emotion-item';
            emotionItem.innerHTML = `
                <div class="autocomplete-container">
                    <input type="text" class="emotion-input emotion-name" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —ç–º–æ—Ü–∏–∏..." autocomplete="off">
                    <div class="autocomplete-list"></div>
                </div>
                <input type="number" class="trainer-input emotion-intensity" placeholder="0-100%" min="0" max="100" step="10">
                <button class="remove-btn" onclick="removeEmotion(this)">√ó</button>
            `;
            container.appendChild(emotionItem);
            
            const newInput = emotionItem.querySelector('.emotion-input');
            setupAutocomplete(newInput);
            
            newInput.addEventListener('input', function() {
                this.value = safeTextInput(this.value);
            });
        }
        
        function removeEmotion(button) {
            const emotionItem = button.parentElement;
            if (document.querySelectorAll('#expected-emotions-container .emotion-item').length > 1) {
                emotionItem.remove();
            }
        }
        
        function collectExpectedEmotions() {
            const emotions = [];
            const emotionItems = document.querySelectorAll('#expected-emotions-container .emotion-item');
            
            emotionItems.forEach(item => {
                const nameInput = item.querySelector('.emotion-input');
                const intensityInput = item.querySelector('.emotion-intensity');
                
                if (nameInput.value.trim() && intensityInput.value) {
                    emotions.push({
                        name: safeTextInput(nameInput.value.trim()),
                        intensity: safeNumberInput(intensityInput.value)
                    });
                }
            });
            
            return emotions;
        }

        // ===== –§–£–ù–ö–¶–ò–ò –†–ê–ë–û–¢–´ –° –ü–û–°–õ–ï–î–°–¢–í–ò–Ø–ú–ò =====
        
        function addConsequence() {
            const container = document.getElementById('expected-consequences-container');
            const consequenceItem = document.createElement('div');
            consequenceItem.className = 'consequence-item';
            consequenceItem.innerHTML = `
                <textarea class="trainer-input trainer-textarea consequence-text" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–æ–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ..."></textarea>
                <div class="input-example">–ü—Ä–∏–º–µ—Ä: "–ú–µ–Ω—è —É–≤–æ–ª—è—Ç —Å —Ä–∞–±–æ—Ç—ã"</div>
                <div class="rating-container">
                    <span>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:</span>
                    <input type="range" class="rating-slider consequence-probability" min="0" max="100" value="50" step="5">
                    <span class="rating-value consequence-probability-value">50%</span>
                </div>
                <div class="rating-scale">
                    <span>0% - –ù–µ —Å–ª—É—á–∏—Ç—Å—è</span>
                    <span>50% - –í–æ–∑–º–æ–∂–Ω–æ</span>
                    <span>100% - –¢–æ—á–Ω–æ —Å–ª—É—á–∏—Ç—Å—è</span>
                </div>
                <button class="remove-btn" onclick="removeConsequence(this)">√ó –£–¥–∞–ª–∏—Ç—å</button>
            `;
            container.appendChild(consequenceItem);
            
            const slider = consequenceItem.querySelector('.consequence-probability');
            const valueSpan = consequenceItem.querySelector('.consequence-probability-value');
            
            slider.addEventListener('input', function() {
                valueSpan.textContent = safeNumberInput(this.value) + '%';
            });
        }
        
        function removeConsequence(button) {
            const consequenceItem = button.parentElement;
            if (document.querySelectorAll('#expected-consequences-container .consequence-item').length > 1) {
                consequenceItem.remove();
            }
        }
        
        function collectExpectedConsequences() {
            const consequences = [];
            const consequenceItems = document.querySelectorAll('#expected-consequences-container .consequence-item');
            
            consequenceItems.forEach(item => {
                const textInput = item.querySelector('.consequence-text');
                const probabilityInput = item.querySelector('.consequence-probability');
                
                if (textInput.value.trim()) {
                    consequences.push({
                        text: safeTextInput(textInput.value.trim()),
                        probability: safeNumberInput(probabilityInput.value)
                    });
                }
            });
            
            return consequences;
        }

        // ===== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –®–ê–ì–ê 3 =====
        
        function createActualConsequencesCheck() {
            const container = document.getElementById('actual-consequences-container');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (expectedConsequences.length === 0) {
                container.innerHTML = '<p style="color: var(--accent-color); font-style: italic;">–í—ã –Ω–µ —É–∫–∞–∑–∞–ª–∏ –æ–∂–∏–¥–∞–µ–º—ã—Ö –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —à–∞–≥–µ</p>';
                return;
            }
            
            expectedConsequences.forEach((consequence, index) => {
                const consequenceItem = document.createElement('div');
                consequenceItem.className = 'consequence-item';
                consequenceItem.innerHTML = `
                    <p><strong>${sanitizeInput(consequence.text)}</strong></p>
                    <p>–û–∂–∏–¥–∞–µ–º–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: ${consequence.probability}%</p>
                    <div class="consequence-check">
                        <span>–°–ª—É—á–∏–ª–æ—Å—å –ª–∏ —ç—Ç–æ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ?</span>
                        <div class="check-options">
                            <label class="check-option">
                                <input type="radio" name="consequence-${index}" value="yes" onchange="updateConsequenceResult(${index}, 'yes')">
                                –î–∞
                            </label>
                            <label class="check-option">
                                <input type="radio" name="consequence-${index}" value="no" onchange="updateConsequenceResult(${index}, 'no')" checked>
                                –ù–µ—Ç
                            </label>
                            <label class="check-option">
                                <input type="radio" name="consequence-${index}" value="partially" onchange="updateConsequenceResult(${index}, 'partially')">
                                –ß–∞—Å—Ç–∏—á–Ω–æ
                            </label>
                        </div>
                    </div>
                `;
                container.appendChild(consequenceItem);
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                if (!actualConsequences[index]) {
                    actualConsequences[index] = {
                        text: consequence.text,
                        expectedProbability: consequence.probability,
                        happened: 'no'
                    };
                }
            });
        }
        
        function createActualEmotionsCheck() {
            const container = document.getElementById('actual-emotions-container');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (expectedEmotions.length === 0) {
                container.innerHTML = '<p style="color: var(--accent-color); font-style: italic;">–í—ã –Ω–µ —É–∫–∞–∑–∞–ª–∏ –æ–∂–∏–¥–∞–µ–º—ã—Ö —ç–º–æ—Ü–∏–π –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —à–∞–≥–µ</p>';
                return;
            }
            
            expectedEmotions.forEach((emotion, index) => {
                const emotionItem = document.createElement('div');
                emotionItem.className = 'emotion-item';
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                const currentActualIntensity = actualEmotions[index] ? actualEmotions[index].actualIntensity : emotion.intensity;
                
                emotionItem.innerHTML = `
                    <span style="color: var(--text-color); min-width: 150px;">${sanitizeInput(emotion.name)}:</span>
                    <span style="color: var(--text-color);">–û–∂–∏–¥–∞–ª–æ—Å—å: ${emotion.intensity}%</span>
                    <input type="number" class="trainer-input emotion-intensity" 
                           value="${currentActualIntensity}"
                           placeholder="0-100%" min="0" max="100" step="10"
                           onchange="updateEmotionIntensity(${index}, this.value)">
                    <span style="color: var(--text-color);">% (—Ä–µ–∞–ª—å–Ω–∞—è –≤—ã—Ä–∞–∂–µ–Ω–Ω–æ—Å—Ç—å)</span>
                `;
                container.appendChild(emotionItem);
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                actualEmotions[index] = {
                    name: emotion.name,
                    expectedIntensity: emotion.intensity,
                    actualIntensity: currentActualIntensity
                };
            });
        }
        
        function updateConsequenceResult(index, value) {
            if (actualConsequences[index]) {
                actualConsequences[index].happened = value;
            } else {
                actualConsequences[index] = {
                    text: expectedConsequences[index].text,
                    expectedProbability: expectedConsequences[index].probability,
                    happened: value
                };
            }
        }
        
        function updateEmotionIntensity(index, value) {
            const intensity = safeNumberInput(value);
            if (actualEmotions[index]) {
                actualEmotions[index].actualIntensity = intensity;
            } else {
                actualEmotions[index] = {
                    name: expectedEmotions[index].name,
                    expectedIntensity: expectedEmotions[index].intensity,
                    actualIntensity: intensity
                };
            }
        }

        // ===== –û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê –¢–†–ï–ù–ê–ñ–ï–†–ê =====
        
        function nextStep() {
            if (currentStep === 1) {
                const situation = document.getElementById('situation').value.trim();
                if (!situation) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é');
                    document.getElementById('situation').style.borderColor = 'var(--warning-color)';
                    return;
                }
                document.getElementById('situation').style.borderColor = '';
            }
            
            if (currentStep === 2) {
                const expectations = document.getElementById('expectations').value.trim();
                if (!expectations) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–ø–∏—à–∏—Ç–µ –≤–∞—à–∏ –æ–∂–∏–¥–∞–Ω–∏—è');
                    document.getElementById('expectations').style.borderColor = 'var(--warning-color)';
                    return;
                }
                
                expectedEmotions = collectExpectedEmotions();
                expectedConsequences = collectExpectedConsequences();
                
                document.getElementById('expectations').style.borderColor = '';
            }
            
            // –°–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —à–∞–≥
            document.getElementById(`step${currentStep}`).style.display = 'none';
            
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –Ω–æ–º–µ—Ä —à–∞–≥–∞
            currentStep++;
            
            // –û–°–û–ë–ï–ù–ù–û–°–¢–¨: –î–ª—è —à–∞–≥–∞ 3 –Ω—É–∂–Ω–æ –∑–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
            if (currentStep === 3) {
                createActualConsequencesCheck();
                createActualEmotionsCheck();
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥
            document.getElementById(`step${currentStep}`).style.display = 'block';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            updateNavigationButtons();
        }
        
        function prevStep() {
            // –°–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —à–∞–≥
            document.getElementById(`step${currentStep}`).style.display = 'none';
            
            // –£–º–µ–Ω—å—à–∞–µ–º –Ω–æ–º–µ—Ä —à–∞–≥–∞
            currentStep--;
            
            // –û–°–û–ë–ï–ù–ù–û–°–¢–¨: –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ —à–∞–≥ 3 —Ç–∞–∫–∂–µ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
            if (currentStep === 3) {
                createActualConsequencesCheck();
                createActualEmotionsCheck();
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —à–∞–≥
            document.getElementById(`step${currentStep}`).style.display = 'block';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            updateNavigationButtons();
        }
        
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const completeSection = document.getElementById('completeSection');
            
            if (currentStep > 1) {
                prevBtn.style.display = 'inline-block';
            } else {
                prevBtn.style.display = 'none';
            }
            
            if (currentStep < totalSteps) {
                nextBtn.style.display = 'inline-block';
                completeSection.style.display = 'none';
            } else {
                nextBtn.style.display = 'none';
                completeSection.style.display = 'block';
            }
        }
        
        function showResult() {
            const allConsequencesChecked = actualConsequences.every(consequence => 
                consequence && consequence.happened
            );
            
            if (!allConsequencesChecked) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ü–µ–Ω–∏—Ç–µ –≤—Å–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è');
                return;
            }
            
            const situation = safeTextInput(document.getElementById('situation').value);
            const expectations = safeTextInput(document.getElementById('expectations').value);
            const reality = safeTextInput(document.getElementById('reality').value);
            const strategies = safeTextInput(document.getElementById('coping-strategies').value);
            const comparison = safeTextInput(document.getElementById('comparison').value);
            const insights = safeTextInput(document.getElementById('insights').value);
            const futureImpact = safeTextInput(document.getElementById('future-impact').value);
            const actualConsequencesText = safeTextInput(document.getElementById('actual-consequences-text').value);
            
            document.getElementById('resultSituation').textContent = situation || '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
            document.getElementById('resultComparison').textContent = comparison || '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
            document.getElementById('resultStrategies').textContent = strategies || '–ù–µ —É–∫–∞–∑–∞–Ω—ã';
            document.getElementById('resultInsights').textContent = insights || '–ù–µ —É–∫–∞–∑–∞–Ω—ã';
            document.getElementById('resultFutureImpact').textContent = futureImpact || '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
            
            fillComparisonTable();
            generateRecommendations();
            
            document.getElementById('resultSection').style.display = 'block';
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        function fillComparisonTable() {
            const tableBody = document.getElementById('comparisonTableBody');
            tableBody.innerHTML = '';
            
            const expectationsRow = document.createElement('tr');
            expectationsRow.innerHTML = `
                <td>–û–∂–∏–¥–∞–Ω–∏—è vs –†–µ–∞–ª—å–Ω–æ—Å—Ç—å</td>
                <td>${sanitizeInput(document.getElementById('expectations').value) || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</td>
                <td>${sanitizeInput(document.getElementById('reality').value) || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</td>
                <td>-</td>
            `;
            tableBody.appendChild(expectationsRow);
            
            expectedEmotions.forEach((expected, i) => {
                const actual = actualEmotions[i] || { actualIntensity: 0 };
                
                const emotionRow = document.createElement('tr');
                emotionRow.innerHTML = `
                    <td>–≠–º–æ—Ü–∏—è: ${sanitizeInput(expected.name) || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}</td>
                    <td>${expected.intensity}%</td>
                    <td>${actual.actualIntensity}%</td>
                    <td>${expected.intensity - actual.actualIntensity > 0 ? '-' : '+'}${Math.abs(expected.intensity - actual.actualIntensity)}%</td>
                `;
                tableBody.appendChild(emotionRow);
            });
            
            actualConsequences.forEach((consequence, index) => {
                const expected = expectedConsequences[index] || { text: '-', probability: 0 };
                
                const consequenceRow = document.createElement('tr');
                let happenedText = '';
                switch(consequence.happened) {
                    case 'yes': happenedText = '–î–∞'; break;
                    case 'no': happenedText = '–ù–µ—Ç'; break;
                    case 'partially': happenedText = '–ß–∞—Å—Ç–∏—á–Ω–æ'; break;
                    default: happenedText = '–ù–µ –æ—Ü–µ–Ω–µ–Ω–æ';
                }
                
                consequenceRow.innerHTML = `
                    <td>${sanitizeInput(expected.text)}</td>
                    <td>${expected.probability}% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</td>
                    <td>${happenedText}</td>
                    <td>${consequence.happened === 'no' ? '–ü–µ—Ä–µ–æ—Ü–µ–Ω–∫–∞' : consequence.happened === 'yes' ? '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ' : '–ß–∞—Å—Ç–∏—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ'}</td>
                `;
                tableBody.appendChild(consequenceRow);
            });
        }
        
        function generateRecommendations() {
            const recommendationsElement = document.getElementById('recommendations');
            let recommendations = '';
            
            const emotionDifferences = expectedEmotions.map((expected, i) => {
                const actual = actualEmotions[i] || { actualIntensity: 0 };
                return expected.intensity - actual.actualIntensity;
            });
            
            const avgEmotionDiff = emotionDifferences.length > 0 ? 
                emotionDifferences.reduce((a, b) => a + b, 0) / emotionDifferences.length : 0;
            
            const notHappenedConsequences = actualConsequences.filter(c => c.happened === 'no').length;
            const totalConsequences = actualConsequences.length;
            const overestimationRate = totalConsequences > 0 ? (notHappenedConsequences / totalConsequences) * 100 : 0;
            
            if (avgEmotionDiff > 30 && overestimationRate > 50) {
                recommendations = `
                    <p>‚úÖ <strong>–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –º–µ–∂–¥—É –æ–∂–∏–¥–∞–Ω–∏—è–º–∏ –∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é!</strong></p>
                    <p>–í—ã —Å–∫–ª–æ–Ω–Ω—ã —Å–∏–ª—å–Ω–æ –ø–µ—Ä–µ–æ—Ü–µ–Ω–∏–≤–∞—Ç—å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —ç–º–æ—Ü–∏–π –∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π. –í –±—É–¥—É—â–µ–º —Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å —Å–µ–±–µ, —á—Ç–æ —Å–∏—Ç—É–∞—Ü–∏—è, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –±—É–¥–µ—Ç –º–µ–Ω–µ–µ —Å—Ç—Ä–µ—Å—Å–æ–≤–æ–π, —á–µ–º –∫–∞–∂–µ—Ç—Å—è.</p>
                `;
            } else if (avgEmotionDiff > 15 || overestimationRate > 30) {
                recommendations = `
                    <p>üëç <strong>–£–º–µ—Ä–µ–Ω–Ω–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –º–µ–∂–¥—É –æ–∂–∏–¥–∞–Ω–∏—è–º–∏ –∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é.</strong></p>
                    <p>–í—ã –∏–Ω–æ–≥–¥–∞ –ø–µ—Ä–µ–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Å–∏—Ç—É–∞—Ü–∏–π. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑ –æ–∂–∏–¥–∞–Ω–∏–π - —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Ä–∞–∑–≤–∏—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ.</p>
                `;
            } else {
                recommendations = `
                    <p>üîç <strong>–û–∂–∏–¥–∞–Ω–∏—è –≤ —Ü–µ–ª–æ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏.</strong></p>
                    <p>–í—ã —Ö–æ—Ä–æ—à–æ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç–µ —Ä–∞–∑–≤–∏—Ç–∏–µ —Å–∏—Ç—É–∞—Ü–∏–π. –≠—Ç–æ —Ü–µ–Ω–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–º–æ–≥–∞–µ—Ç —Å–Ω–∏–∑–∏—Ç—å —Å—Ç—Ä–µ—Å—Å –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –±–æ–ª–µ–µ –≤–∑–≤–µ—à–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è.</p>
                `;
            }
            
            recommendationsElement.innerHTML = recommendations;
        }
        
        function resetTrainer() {
            currentStep = 1;
            
            for (let i = 2; i <= totalSteps; i++) {
                const stepElement = document.getElementById(`step${i}`);
                if (stepElement) {
                    stepElement.style.display = 'none';
                }
            }
            
            const firstStep = document.getElementById('step1');
            if (firstStep) {
                firstStep.style.display = 'block';
            }
            
            const resultSection = document.getElementById('resultSection');
            if (resultSection) {
                resultSection.style.display = 'none';
            }
            
            const inputs = [
                'situation', 'expectations', 'reality', 'coping-strategies', 
                'comparison', 'insights', 'future-impact', 'actual-consequences-text'
            ];
            
            inputs.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.value = '';
            });
            
            expectedEmotions = [];
            actualEmotions = [];
            expectedConsequences = [];
            actualConsequences = [];
            
            const containers = [
                'expected-emotions-container', 'actual-emotions-container',
                'expected-consequences-container', 'actual-consequences-container'
            ];
            
            containers.forEach(id => {
                const container = document.getElementById(id);
                if (container) {
                    const items = container.querySelectorAll('.emotion-item, .consequence-item');
                    if (items.length > 1) {
                        for (let i = 1; i < items.length; i++) {
                            items[i].remove();
                        }
                    }
                    
                    const inputs = container.querySelectorAll('input, textarea');
                    inputs.forEach(input => {
                        if (input.type !== 'button') {
                            input.value = '';
                            if (input.type === 'range') {
                                input.value = '50';
                                const valueSpan = input.parentElement.querySelector('.rating-value');
                                if (valueSpan) valueSpan.textContent = '50%';
                            }
                        }
                    });
                }
            });
            
            updateNavigationButtons();
            
            const trainerSection = document.querySelector('.trainer-section');
            if (trainerSection) {
                trainerSection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // ===== –§–£–ù–ö–¶–ò–ò –°–ö–ê–ß–ò–í–ê–ù–ò–Ø =====
        
        function downloadTemplate() {
            const allowedPaths = [
                '../assets/files/shablonexpozicii.docx',
                '/assets/files/shablonexpozicii.docx',
                './assets/files/shablonexpozicii.docx'
            ];
            
            const filePath = '../assets/files/shablonexpozicii.docx';
            
            if (!allowedPaths.includes(filePath)) {
                console.error('–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É');
                alert('–û—à–∏–±–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É');
                return;
            }
            
            try {
                const link = document.createElement('a');
                link.href = filePath;
                link.download = '–®–∞–±–ª–æ–Ω_–¥–Ω–µ–≤–Ω–∏–∫–∞_—ç–∫—Å–ø–æ–∑–∏—Ü–∏–π.docx';
                link.rel = 'noopener noreferrer';
                link.target = '_blank';
                
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ —à–∞–±–ª–æ–Ω–∞:', error);
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–∞—á–∞—Ç—å —à–∞–±–ª–æ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
            }
        }
        
        function downloadExcel() {
            const situation = safeTextInput(document.getElementById('situation').value);
            const expectations = safeTextInput(document.getElementById('expectations').value);
            const reality = safeTextInput(document.getElementById('reality').value);
            const strategies = safeTextInput(document.getElementById('coping-strategies').value);
            const comparison = safeTextInput(document.getElementById('comparison').value);
            const insights = safeTextInput(document.getElementById('insights').value);
            const futureImpact = safeTextInput(document.getElementById('future-impact').value);
            const actualConsequencesText = safeTextInput(document.getElementById('actual-consequences-text').value);
            
            let expectedEmotionsStr = expectedEmotions.map(e => `${e.name}: ${e.intensity}%`).join('\n');
            let actualEmotionsStr = actualEmotions.map(e => `${e.name}: ${e.actualIntensity}%`).join('\n');
            
            let expectedConsequencesStr = expectedConsequences.map(c => `${c.text} (${c.probability}%)`).join('\n');
            let actualConsequencesStr = actualConsequences.map(c => {
                let happened = '';
                switch(c.happened) {
                    case 'yes': happened = '–î–∞'; break;
                    case 'no': happened = '–ù–µ—Ç'; break;
                    case 'partially': happened = '–ß–∞—Å—Ç–∏—á–Ω–æ'; break;
                    default: happened = '–ù–µ –æ—Ü–µ–Ω–µ–Ω–æ';
                }
                return `${c.text} - ${happened}`;
            }).join('\n');

            const wb = XLSX.utils.book_new();
            const ws = XLSX.utils.aoa_to_sheet([
                ["–°–∏—Ç—É–∞—Ü–∏—è", "–û–∂–∏–¥–∞–Ω–∏—è", "–†–µ–∞–ª—å–Ω–æ—Å—Ç—å", "–û–∂–∏–¥–∞–µ–º—ã–µ —ç–º–æ—Ü–∏–∏", "–†–µ–∞–ª—å–Ω—ã–µ —ç–º–æ—Ü–∏–∏", "–û–∂–∏–¥–∞–µ–º—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è", "–†–µ–∞–ª—å–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è", "–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–æ–≤–ª–∞–¥–∞–Ω–∏—è", "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ", "–ò–Ω—Å–∞–π—Ç—ã", "–í–ª–∏—è–Ω–∏–µ –Ω–∞ –±—É–¥—É—â–µ–µ", "–†–µ–∞–ª—å–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è (—Ç–µ–∫—Å—Ç)"],
                [situation, expectations, reality, expectedEmotionsStr, actualEmotionsStr, expectedConsequencesStr, actualConsequencesStr, strategies, comparison, insights, futureImpact, actualConsequencesText]
            ]);

            const colWidths = [
                { wch: 30 }, { wch: 30 }, { wch: 30 }, { wch: 25 }, { wch: 25 },
                { wch: 30 }, { wch: 30 }, { wch: 30 }, { wch: 30 }, { wch: 30 },
                { wch: 30 }, { wch: 30 }
            ];
            ws['!cols'] = colWidths;

            const range = XLSX.utils.decode_range(ws['!ref']);
            for(let R = range.s.r; R <= range.e.r; ++R) {
                for(let C = range.s.c; C <= range.e.c; ++C) {
                    const cell_address = {c:C, r:R};
                    const cell_ref = XLSX.utils.encode_cell(cell_address);
                    if(!ws[cell_ref]) continue;
                    
                    if(!ws[cell_ref].s) ws[cell_ref].s = {};
                    ws[cell_ref].s.border = {
                        top: {style: "thin", color: {rgb: "000000"}},
                        left: {style: "thin", color: {rgb: "000000"}},
                        bottom: {style: "thin", color: {rgb: "000000"}},
                        right: {style: "thin", color: {rgb: "000000"}}
                    };
                    
                    if(R === 0) {
                        ws[cell_ref].s.font = { bold: true };
                        ws[cell_ref].s.fill = { fgColor: {rgb: "E0E0E0"} };
                    }
                    
                    ws[cell_ref].s.alignment = { 
                        wrapText: true,
                        vertical: "top"
                    };
                }
            }

            XLSX.utils.book_append_sheet(wb, ws, "–î–Ω–µ–≤–Ω–∏–∫ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π");
            XLSX.writeFile(wb, "–¥–Ω–µ–≤–Ω–∏–∫_—ç–∫—Å–ø–æ–∑–∏—Ü–∏–π.xlsx");
        }
        
        function downloadPDF() {
            if (window.self !== window.top) {
                alert('–§—É–Ω–∫—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ');
                return;
            }
            
            const printWindow = window.open('', '_blank', 'noopener,noreferrer');
            if (!printWindow) {
                alert('–†–∞–∑—Ä–µ—à–∏—Ç–µ –≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –æ–∫–Ω–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF');
                return;
            }
            
            const situation = safeTextInput(document.getElementById('situation').value);
            const expectations = safeTextInput(document.getElementById('expectations').value);
            const reality = safeTextInput(document.getElementById('reality').value);
            const strategies = safeTextInput(document.getElementById('coping-strategies').value);
            const comparison = safeTextInput(document.getElementById('comparison').value);
            const insights = safeTextInput(document.getElementById('insights').value);
            const futureImpact = safeTextInput(document.getElementById('future-impact').value);
            
            let expectedEmotionsStr = expectedEmotions.map(e => `${e.name}: ${e.intensity}%`).join('; ');
            let actualEmotionsStr = actualEmotions.map(e => `${e.name}: ${e.actualIntensity}%`).join('; ');
            let expectedConsequencesStr = expectedConsequences.map(c => `${c.text} (${c.probability}%)`).join('; ');
            let actualConsequencesStr = actualConsequences.map(c => {
                let happened = '';
                switch(c.happened) {
                    case 'yes': happened = '–î–∞'; break;
                    case 'no': happened = '–ù–µ—Ç'; break;
                    case 'partially': happened = '–ß–∞—Å—Ç–∏—á–Ω–æ'; break;
                }
                return `${c.text} - ${happened}`;
            }).join('; ');

            const htmlContent = `
                <html>
                <head>
                    <meta charset="UTF-8">
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        h1 { color: #2c3e50; text-align: center; }
                        .section { margin-bottom: 30px; }
                        .section-title { font-weight: bold; color: #2c3e50; margin-bottom: 10px; font-size: 1.1em; }
                        .content { margin-left: 20px; }
                        table { width: 100%; border-collapse: collapse; margin: 10px 0; }
                        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                        th { background-color: #2c3e50; color: white; }
                    </style>
                </head>
                <body>
                    <h1>–î–Ω–µ–≤–Ω–∏–∫ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–π</h1>
                    
                    <div class="section">
                        <div class="section-title">–°–∏—Ç—É–∞—Ü–∏—è:</div>
                        <div class="content">${situation}</div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">–û–∂–∏–¥–∞–Ω–∏—è:</div>
                        <div class="content">${expectations}</div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">–†–µ–∞–ª—å–Ω–æ—Å—Ç—å:</div>
                        <div class="content">${reality}</div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">–≠–º–æ—Ü–∏–∏:</div>
                        <table>
                            <tr>
                                <th>–û–∂–∏–¥–∞–µ–º—ã–µ —ç–º–æ—Ü–∏–∏</th>
                                <th>–†–µ–∞–ª—å–Ω—ã–µ —ç–º–æ—Ü–∏–∏</th>
                            </tr>
                            <tr>
                                <td>${expectedEmotionsStr}</td>
                                <td>${actualEmotionsStr}</td>
                            </tr>
                        </table>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:</div>
                        <table>
                            <tr>
                                <th>–û–∂–∏–¥–∞–µ–º—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è</th>
                                <th>–†–µ–∞–ª—å–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è</th>
                            </tr>
                            <tr>
                                <td>${expectedConsequencesStr}</td>
                                <td>${actualConsequencesStr}</td>
                            </tr>
                        </table>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–æ–≤–ª–∞–¥–∞–Ω–∏—è:</div>
                        <div class="content">${strategies}</div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏ –≤—ã–≤–æ–¥—ã:</div>
                        <div class="content">${comparison}</div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">–ò–Ω—Å–∞–π—Ç—ã:</div>
                        <div class="content">${insights}</div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">–í–ª–∏—è–Ω–∏–µ –Ω–∞ –±—É–¥—É—â–µ–µ:</div>
                        <div class="content">${futureImpact}</div>
                    </div>
                    
                    <p style="margin-top: 20px; font-size: 12px; color: #666;">
                        –°–æ–∑–¥–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é —Å–µ—Ä–≤–∏—Å–∞ "–ù–ï –ì–û–†–ò" - ${new Date().toLocaleDateString('ru-RU')}
                    </p>
                </body>
                </html>
            `;
            
            printWindow.document.write(htmlContent);
            printWindow.document.close();
            printWindow.print();
        }

        // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø =====
        
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            const mobileMenu = document.querySelector('.mobile-menu');
            
            if (mobileMenuBtn && mobileMenu) {
                mobileMenuBtn.addEventListener('click', function() {
                    mobileMenu.classList.toggle('active');
                    this.textContent = mobileMenu.classList.contains('active') ? '‚úï' : '‚ò∞';
                });
                
                const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
                mobileNavLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        mobileMenu.classList.remove('active');
                        mobileMenuBtn.textContent = '‚ò∞';
                    });
                });
            }
            
            const fadeElements = document.querySelectorAll('.fade-in-element');
            const appearOnScroll = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animationPlayState = 'running';
                        appearOnScroll.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            
            fadeElements.forEach(element => {
                appearOnScroll.observe(element);
            });

            updateNavigationButtons();
            
            const initialInputs = document.querySelectorAll('.emotion-input');
            initialInputs.forEach(input => {
                setupAutocomplete(input);
            });
            
            const initialSliders = document.querySelectorAll('.consequence-probability');
            initialSliders.forEach(slider => {
                const valueSpan = slider.parentElement.querySelector('.consequence-probability-value');
                slider.addEventListener('input', function() {
                    valueSpan.textContent = safeNumberInput(this.value) + '%';
                });
            });
            
            const inputs = document.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                if (input.type !== 'number' && input.type !== 'range' && input.type !== 'radio') {
                    input.addEventListener('input', function() {
                        this.value = safeTextInput(this.value);
                    });
                }
            });
        });
    </script>
</body>
</html>